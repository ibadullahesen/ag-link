<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aglink.pro | Professional Link Shortener</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        .navbar-brand {
            font-weight: 800;
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
            background: white;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .stat-card {
            border-left: 4px solid var(--primary);
            padding-left: 20px;
        }
        
        .link-item {
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }
        
        .link-item:hover {
            border-left-color: var(--primary);
            background: #f8f9ff;
        }
        
        .tab-content {
            background: white;
            border-radius: 0 0 15px 15px;
            padding: 25px;
        }
        
        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
        }
        
        .nav-tabs .nav-link {
            border: none;
            color: #666;
            font-weight: 500;
            padding: 12px 25px;
        }
        
        .nav-tabs .nav-link.active {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 10px 10px 0 0;
        }
        
        .qr-code {
            background: white;
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
            border: 1px solid #dee2e6;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .flag-icon {
            width: 24px;
            height: 16px;
            border-radius: 2px;
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-link-45deg me-2"></i>aglink.pro
            </a>
            <div class="d-flex">
                <button class="btn btn-outline-primary me-2" onclick="showTab('create')">
                    <i class="bi bi-plus-circle me-1"></i>Yeni Link
                </button>
                <button class="btn btn-outline-info" onclick="showTab('dashboard')">
                    <i class="bi bi-graph-up me-1"></i>Dashboard
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container py-5">
        <!-- Create Link Tab -->
        <div id="create-tab">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card p-4 mb-4">
                        <h3 class="mb-4"><i class="bi bi-link me-2"></i>Yeni Link Yarat</h3>
                        
                        <div class="mb-3">
                            <label class="form-label">URL</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="bi bi-globe"></i></span>
                                <input type="url" id="fullUrl" class="form-control" 
                                       placeholder="https://example.com/uzun-link" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">X√ºsusi Ad (ƒ∞st…ôy…ô baƒülƒ±)</label>
                                <div class="input-group">
                                    <span class="input-group-text">aglink.pro/</span>
                                    <input type="text" id="customAlias" class="form-control" 
                                           placeholder="mening-linkim">
                                </div>
                                <small class="text-muted">Bo≈ü buraxƒ±lsa, avtomatik kod yaradƒ±lacaq</small>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label">M√ºdd…ôt</label>
                                <select id="expiresIn" class="form-select">
                                    <option value="3600">1 Saat</option>
                                    <option value="86400">1 G√ºn</option>
                                    <option value="604800">1 H…ôft…ô</option>
                                    <option value="2592000">1 Ay</option>
                                    <option value="forever" selected>Sonsuz</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">≈ûifr…ô (ƒ∞st…ôy…ô baƒülƒ±)</label>
                                <input type="password" id="password" class="form-control" 
                                       placeholder="Linki qorumaq √º√ß√ºn ≈üifr…ô">
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Tags (Verg√ºll…ô)</label>
                                <input type="text" id="tags" class="form-control" 
                                       placeholder="marketting, sosial, i≈ü">
                            </div>
                        </div>
                        
                        <button class="btn btn-primary btn-lg w-100" onclick="createLink()">
                            <i class="bi bi-lightning me-2"></i>Linki Qƒ±salt
                        </button>
                    </div>
                    
                    <div id="result-card" class="card p-4" style="display: none;">
                        <h4 class="mb-3">‚úÖ Link Hazƒ±rdƒ±r!</h4>
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <div class="input-group mb-3">
                                    <input type="text" id="shortUrlResult" class="form-control" readonly>
                                    <button class="btn btn-success" onclick="copyResult()">
                                        <i class="bi bi-copy"></i> Kopyala
                                    </button>
                                </div>
                                <div class="mb-3">
                                    <strong>Orijinal:</strong> 
                                    <span id="originalUrl" class="text-muted"></span>
                                </div>
                            </div>
                            <div class="col-md-4 text-center">
                                <div id="qrCodeContainer"></div>
                                <small class="text-muted">QR Kod</small>
                            </div>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-outline-primary me-2" onclick="shareLink()">
                                <i class="bi bi-share"></i> Payla≈ü
                            </button>
                            <button class="btn btn-outline-info" onclick="viewStats()">
                                <i class="bi bi-bar-chart"></i> Statistika
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard-tab" style="display: none;">
            <h3 class="mb-4"><i class="bi bi-graph-up me-2"></i>Dashboard</h3>
            
            <!-- Stats Cards -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card p-3 stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="text-muted">√úmumi Linkl…ôr</h6>
                                <h3 id="totalLinks" class="mb-0">0</h3>
                            </div>
                            <div class="align-self-center">
                                <i class="bi bi-link-45deg text-primary fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3">
                    <div class="card p-3 stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="text-muted">Aktiv Linkl…ôr</h6>
                                <h3 id="activeLinks" class="mb-0">0</h3>
                            </div>
                            <div class="align-self-center">
                                <i class="bi bi-lightning text-success fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3">
                    <div class="card p-3 stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="text-muted">√úmumi Klikl…ôr</h6>
                                <h3 id="totalClicks" class="mb-0">0</h3>
                            </div>
                            <div class="align-self-center">
                                <i class="bi bi-mouse text-info fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-3">
                    <div class="card p-3 stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="text-muted">Orta Klik/Link</h6>
                                <h3 id="avgClicks" class="mb-0">0</h3>
                            </div>
                            <div class="align-self-center">
                                <i class="bi bi-bar-chart text-warning fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Charts -->
            <div class="row">
                <div class="col-lg-8">
                    <div class="card p-3 mb-4">
                        <h5>Son 7 G√ºn Aktivlik</h5>
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card p-3 mb-4">
                        <h5>∆èn Populer Linkl…ôr</h5>
                        <div id="topLinks" class="mt-3"></div>
                    </div>
                </div>
            </div>
            
            <!-- Links List -->
            <div class="card p-3">
                <h5 class="mb-3">Son Linkl…ôrim</h5>
                <div id="recentLinks"></div>
            </div>
        </div>
        
        <!-- Stats Modal -->
        <div class="modal fade" id="statsModal" tabindex="-1">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">üìä Detallƒ± Statistika</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div id="statsContent"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // User management
        let userId = localStorage.getItem('aglink_userId');
        if (!userId) {
            userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('aglink_userId', userId);
        }

        let activityChart = null;
        let currentStatsCode = null;

        // Tab management
        function showTab(tabName) {
            // Hide all tabs
            document.getElementById('create-tab').style.display = 'none';
            document.getElementById('dashboard-tab').style.display = 'none';
            
            // Show selected tab
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // Update button states
            document.querySelectorAll('button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Load data for dashboard
            if (tabName === 'dashboard') {
                loadDashboard();
                loadRecentLinks();
            }
        }

        // Create new link
        async function createLink() {
            const fullUrl = document.getElementById('fullUrl').value;
            const customAlias = document.getElementById('customAlias').value;
            const expiresIn = document.getElementById('expiresIn').value;
            const password = document.getElementById('password').value;
            const tags = document.getElementById('tags').value;

            if (!fullUrl) {
                showNotification('Xahi≈ü edirik URL daxil edin', 'warning');
                return;
            }

            try {
                const response = await fetch('/api/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        fullUrl,
                        userId,
                        expiresIn,
                        customAlias,
                        password,
                        tags
                    })
                });

                const data = await response.json();

                if (data.success) {
                    // Show result
                    document.getElementById('shortUrlResult').value = data.shortUrl;
                    document.getElementById('originalUrl').textContent = fullUrl;
                    
                    // Show QR code
                    if (data.qrCode) {
                        document.getElementById('qrCodeContainer').innerHTML = 
                            `<img src="${data.qrCode}" alt="QR Code" class="img-fluid" style="max-width: 150px;">`;
                    }
                    
                    // Show result card
                    document.getElementById('result-card').style.display = 'block';
                    
                    // Scroll to result
                    document.getElementById('result-card').scrollIntoView({ behavior: 'smooth' });
                    
                    // Clear form
                    document.getElementById('fullUrl').value = '';
                    document.getElementById('customAlias').value = '';
                    document.getElementById('password').value = '';
                    document.getElementById('tags').value = '';
                    
                    // Load dashboard data
                    loadDashboard();
                    loadRecentLinks();
                    
                    showNotification('‚úÖ Link uƒüurla yaradƒ±ldƒ±!', 'success');
                } else {
                    showNotification(data.error || 'X…ôta ba≈ü verdi', 'danger');
                }
            } catch (error) {
                console.error('Error:', error);
                showNotification('Server x…ôtasƒ±', 'danger');
            }
        }

        // Copy to clipboard
        function copyResult() {
            const input = document.getElementById('shortUrlResult');
            input.select();
            document.execCommand('copy');
            showNotification('üìã Link kopyalandƒ±!', 'success');
        }

        // Share link
        function shareLink() {
            const url = document.getElementById('shortUrlResult').value;
            if (navigator.share) {
                navigator.share({
                    title: 'aglink.pro - Qƒ±saldƒ±lmƒ±≈ü Link',
                    text: 'Bu linki yoxlayƒ±n:',
                    url: url
                });
            } else {
                copyResult();
                showNotification('Link kopyalandƒ±, indi payla≈üa bil…ôrsiniz!', 'info');
            }
        }

        // View stats
        function viewStats() {
            const url = document.getElementById('shortUrlResult').value;
            const code = url.split('/').pop();
            viewLinkStats(code);
        }

        // Load dashboard data
        async function loadDashboard() {
            try {
                const response = await fetch('/api/dashboard', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ userId })
                });

                const data = await response.json();

                if (data.success) {
                    // Update stats
                    document.getElementById('totalLinks').textContent = data.overview.totalLinks;
                    document.getElementById('activeLinks').textContent = data.overview.activeLinks;
                    document.getElementById('totalClicks').textContent = data.overview.totalClicks;
                    document.getElementById('avgClicks').textContent = data.overview.averageClicks;
                    
                    // Update top links
                    const topLinksDiv = document.getElementById('topLinks');
                    let html = '';
                    data.topLinks.forEach((link, index) => {
                        html += `
                        <div class="d-flex justify-content-between align-items-center mb-3 p-2 border-bottom">
                            <div>
                                <strong class="text-primary">${index + 1}. ${link.shortCode}</strong>
                                <div class="text-muted small">${link.fullUrl}</div>
                            </div>
                            <span class="badge bg-primary rounded-pill">${link.totalClicks}</span>
                        </div>`;
                    });
                    topLinksDiv.innerHTML = html;
                    
                    // Update chart
                    updateActivityChart(data.recentActivity);
                }
            } catch (error) {
                console.error('Dashboard error:', error);
            }
        }

        // Load recent links
        async function loadRecentLinks() {
            try {
                const response = await fetch('/api/mylinks', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ userId })
                });

                const data = await response.json();

                if (data.success && data.links.length > 0) {
                    let html = '';
                    const recent = data.links.slice(0, 5);
                    
                    recent.forEach(link => {
                        const shortUrl = `${window.location.origin}/${link.shortCode}`;
                        const daysLeft = link.daysLeft > 0 ? 
                            `<span class="badge bg-success">${link.daysLeft} g√ºn</span>` : 
                            (link.daysLeft === null ? '<span class="badge bg-info">Sonsuz</span>' : 
                            '<span class="badge bg-danger">Bitib</span>');
                        
                        html += `
                        <div class="link-item p-3 mb-2 border rounded">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <h6 class="mb-1">
                                        <a href="${shortUrl}" target="_blank" class="text-decoration-none">
                                            ${window.location.host}/${link.shortCode}
                                        </a>
                                    </h6>
                                    <p class="text-muted mb-1 small">${link.fullUrl.substring(0, 70)}${link.fullUrl.length > 70 ? '...' : ''}</p>
                                    <div>
                                        <span class="badge bg-primary me-2">
                                            <i class="bi bi-mouse"></i> ${link.totalClicks || 0}
                                        </span>
                                        <span class="badge bg-secondary me-2">
                                            <i class="bi bi-calendar"></i> ${new Date(link.createdAt).toLocaleDateString('az-AZ')}
                                        </span>
                                        ${daysLeft}
                                    </div>
                                </div>
                                <div class="col-md-4 text-end">
                                    <button class="btn btn-sm btn-outline-primary me-1" onclick="viewLinkStats('${link.shortCode}')">
                                        <i class="bi bi-bar-chart"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success me-1" onclick="copyToClipboard('${shortUrl}')">
                                        <i class="bi bi-copy"></i>
                                    </button>
                                </div>
                            </div>
                        </div>`;
                    });
                    
                    document.getElementById('recentLinks').innerHTML = html;
                } else {
                    document.getElementById('recentLinks').innerHTML = `
                        <div class="text-center py-4 text-muted">
                            <i class="bi bi-link-45deg fs-1"></i>
                            <p class="mt-2">H…ôl…ô link yoxdur</p>
                        </div>`;
                }
            } catch (error) {
                console.error('Recent links error:', error);
            }
        }

        // Update activity chart
        function updateActivityChart(data) {
            const ctx = document.getElementById('activityChart').getContext('2d');
            
            if (activityChart) {
                activityChart.destroy();
            }
            
            const labels = data.map(item => {
                const date = new Date(item.date);
                return date.toLocaleDateString('az-AZ', { weekday: 'short' });
            });
            
            const clicks = data.map(item => item.clicks);
            
            activityChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Klikl…ôr',
                        data: clicks,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        // View link stats
        async function viewLinkStats(code) {
            currentStatsCode = code;
            
            try {
                const response = await fetch(`/api/stats/${code}`);
                const data = await response.json();
                
                if (data.success) {
                    let statsHtml = `
                    <div class="row">
                        <div class="col-md-6">
                            <h4>${window.location.host}/${code}</h4>
                            <p class="text-muted">${data.link.fullUrl}</p>
                            
                            <div class="row mt-4">
                                <div class="col-md-6 mb-3">
                                    <div class="card p-3 text-center">
                                        <h2 class="text-primary">${data.stats.totalClicks}</h2>
                                        <p class="mb-0">√úmumi Klik</p>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="card p-3 text-center">
                                        <h2 class="text-success">${data.stats.uniqueClicks}</h2>
                                        <p class="mb-0">Unikal Klik</p>
                                    </div>
                                </div>
                            </div>
                            
                            <h5 class="mt-4">üåç √ñlk…ô Paylanmasƒ±</h5>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>√ñlk…ô</th>
                                            <th>Klik</th>
                                            <th>Faiz</th>
                                        </tr>
                                    </thead>
                                    <tbody>`;
                    
                    data.stats.countries.forEach(country => {
                        const percentage = ((country.count / data.stats.totalClicks) * 100).toFixed(1);
                        const flag = getFlagEmoji(country.countryCode);
                        
                        statsHtml += `
                            <tr>
                                <td>
                                    <span class="me-2">${flag}</span>
                                    ${country.country}
                                </td>
                                <td>${country.count}</td>
                                <td>
                                    <div class="progress" style="height: 20px;">
                                        <div class="progress-bar" role="progressbar" 
                                             style="width: ${percentage}%">
                                            ${percentage}%
                                        </div>
                                    </div>
                                </td>
                            </tr>`;
                    });
                    
                    statsHtml += `
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="card p-3">
                                        <h5>üì± Qurƒüular</h5>
                                        <canvas id="deviceChart" height="200"></canvas>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="card p-3">
                                        <h5>üåê Brauzerl…ôr</h5>
                                        <canvas id="browserChart" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card p-3 mt-3">
                                <h5>üìÖ Son H…ôft…ô Aktivlik</h5>
                                <canvas id="dailyChart" height="150"></canvas>
                            </div>
                        </div>
                    </div>`;
                    
                    document.getElementById('statsContent').innerHTML = statsHtml;
                    
                    // Create charts
                    createPieChart('deviceChart', data.stats.devices);
                    createPieChart('browserChart', data.stats.browsers);
                    createDailyChart('dailyChart', data.stats.daily);
                    
                    // Show modal
                    const modal = new bootstrap.Modal(document.getElementById('statsModal'));
                    modal.show();
                }
            } catch (error) {
                console.error('Stats error:', error);
                showNotification('Statistika y√ºkl…ônm…ôdi', 'danger');
            }
        }

        // Create pie chart
        function createPieChart(canvasId, data) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const labels = Object.keys(data);
            const values = Object.values(data);
            const colors = ['#667eea', '#764ba2', '#10b981', '#f59e0b', '#ef4444', '#3b82f6'];
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: values,
                        backgroundColor: colors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Create daily chart
        function createDailyChart(canvasId, data) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const labels = data.map(item => {
                const date = new Date(item.date);
                return date.toLocaleDateString('az-AZ', { day: 'numeric', month: 'short' });
            });
            const clicks = data.map(item => item.clicks);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Klikl…ôr',
                        data: clicks,
                        backgroundColor: '#667eea',
                        borderColor: '#764ba2',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        // Copy to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Link kopyalandƒ±!', 'success');
            });
        }

        // Get flag emoji (simplified)
        function getFlagEmoji(countryCode) {
            if (!countryCode || countryCode === 'XX') return 'üåç';
            
            // Simple mapping for common countries
            const flags = {
                'AZ': 'üá¶üáø', 'TR': 'üáπüá∑', 'US': 'üá∫üá∏', 'GB': 'üá¨üáß',
                'DE': 'üá©üá™', 'FR': 'üá´üá∑', 'RU': 'üá∑üá∫', 'CN': 'üá®üá≥'
            };
            
            return flags[countryCode] || 'üåç';
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const container = document.createElement('div');
            container.className = `notification alert alert-${type} alert-dismissible fade show`;
            container.innerHTML = `
                ${message}
                <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
            `;
            
            document.body.appendChild(container);
            
            setTimeout(() => {
                if (container.parentNode) {
                    container.remove();
                }
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Show create tab by default
            showTab('create');
            
            // Auto-focus URL input
            document.getElementById('fullUrl').focus();
            
            // Load initial data
            loadDashboard();
        });
    </script>
</body>
</html>
